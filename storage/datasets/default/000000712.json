{
	"title": "MLflow | ü¶úÔ∏èüîó Langchain",
	"url": "https://python.langchain.com/docs/integrations/providers/mlflow_tracking",
	"html": "ProvidersMoreMLflow\nMLflow\n\nMLflow is a versatile, expandable, open-source platform for managing workflows and artifacts across the machine learning lifecycle. It has built-in integrations with many popular ML libraries, but can be used with any library, algorithm, or deployment tool. It is designed to be extensible, so you can write plugins to support new workflows, libraries, and tools.\n\nThis notebook goes over how to track your LangChain experiments into your MLflow Server\n\nExternal examples‚Äã\n\nMLflow provides several examples for the LangChain integration:\n\nsimple_chain\nsimple_agent\nretriever_chain\nretrieval_qa_chain\nExample‚Äã\npip install azureml-mlflow\npip install pandas\npip install textstat\npip install spacy\npip install openai\npip install google-search-results\npython -m spacy download en_core_web_sm\n\nimport os\n\nos.environ[\"MLFLOW_TRACKING_URI\"] = \"\"\nos.environ[\"OPENAI_API_KEY\"] = \"\"\nos.environ[\"SERPAPI_API_KEY\"] = \"\"\n\nfrom langchain.callbacks import MlflowCallbackHandler\nfrom langchain.llms import OpenAI\n\n\"\"\"Main function.\n\nThis function is used to try the callback handler.\nScenarios:\n1. OpenAI LLM\n2. Chain with multiple SubChains on multiple generations\n3. Agent with Tools\n\"\"\"\nmlflow_callback = MlflowCallbackHandler()\nllm = OpenAI(\n    model_name=\"gpt-3.5-turbo\", temperature=0, callbacks=[mlflow_callback], verbose=True\n)\n\n# SCENARIO 1 - LLM\nllm_result = llm.generate([\"Tell me a joke\"])\n\nmlflow_callback.flush_tracker(llm)\n\nfrom langchain.chains import LLMChain\nfrom langchain.prompts import PromptTemplate\n\n# SCENARIO 2 - Chain\ntemplate = \"\"\"You are a playwright. Given the title of play, it is your job to write a synopsis for that title.\nTitle: {title}\nPlaywright: This is a synopsis for the above play:\"\"\"\nprompt_template = PromptTemplate(input_variables=[\"title\"], template=template)\nsynopsis_chain = LLMChain(llm=llm, prompt=prompt_template, callbacks=[mlflow_callback])\n\ntest_prompts = [\n    {\n        \"title\": \"documentary about good video games that push the boundary of game design\"\n    },\n]\nsynopsis_chain.apply(test_prompts)\nmlflow_callback.flush_tracker(synopsis_chain)\n\nfrom langchain.agents import AgentType, initialize_agent, load_tools\n\n# SCENARIO 3 - Agent with Tools\ntools = load_tools([\"serpapi\", \"llm-math\"], llm=llm, callbacks=[mlflow_callback])\nagent = initialize_agent(\n    tools,\n    llm,\n    agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION,\n    callbacks=[mlflow_callback],\n    verbose=True,\n)\nagent.run(\n    \"Who is Leo DiCaprio's girlfriend? What is her current age raised to the 0.43 power?\"\n)\nmlflow_callback.flush_tracker(agent, finish=True)\n\nPrevious\nMLflow AI Gateway\nNext\nModal"
}