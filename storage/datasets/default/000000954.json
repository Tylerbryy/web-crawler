{
	"title": "Conversation Knowledge Graph | 🦜️🔗 Langchain",
	"url": "https://python.langchain.com/docs/modules/memory/types/kg",
	"html": "ModulesMoreMemoryMemory typesConversation Knowledge Graph\nConversation Knowledge Graph\n\nThis type of memory uses a knowledge graph to recreate memory.\n\nUsing memory with LLM​\nfrom langchain.llms import OpenAI\nfrom langchain.memory import ConversationKGMemory\n\nllm = OpenAI(temperature=0)\nmemory = ConversationKGMemory(llm=llm)\nmemory.save_context({\"input\": \"say hi to sam\"}, {\"output\": \"who is sam\"})\nmemory.save_context({\"input\": \"sam is a friend\"}, {\"output\": \"okay\"})\n\nmemory.load_memory_variables({\"input\": \"who is sam\"})\n\n    {'history': 'On Sam: Sam is friend.'}\n\n\nWe can also get the history as a list of messages (this is useful if you are using this with a chat model).\n\nmemory = ConversationKGMemory(llm=llm, return_messages=True)\nmemory.save_context({\"input\": \"say hi to sam\"}, {\"output\": \"who is sam\"})\nmemory.save_context({\"input\": \"sam is a friend\"}, {\"output\": \"okay\"})\n\nmemory.load_memory_variables({\"input\": \"who is sam\"})\n\n    {'history': [SystemMessage(content='On Sam: Sam is friend.', additional_kwargs={})]}\n\n\nWe can also more modularly get current entities from a new message (will use previous messages as context).\n\nmemory.get_current_entities(\"what's Sams favorite color?\")\n\n    ['Sam']\n\n\nWe can also more modularly get knowledge triplets from a new message (will use previous messages as context).\n\nmemory.get_knowledge_triplets(\"her favorite color is red\")\n\n    [KnowledgeTriple(subject='Sam', predicate='favorite color', object_='red')]\n\nUsing in a chain​\n\nLet's now use this in a chain!\n\nllm = OpenAI(temperature=0)\nfrom langchain.chains import ConversationChain\nfrom langchain.prompts.prompt import PromptTemplate\n\ntemplate = \"\"\"The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. \nIf the AI does not know the answer to a question, it truthfully says it does not know. The AI ONLY uses information contained in the \"Relevant Information\" section and does not hallucinate.\n\nRelevant Information:\n\n{history}\n\nConversation:\nHuman: {input}\nAI:\"\"\"\nprompt = PromptTemplate(input_variables=[\"history\", \"input\"], template=template)\nconversation_with_kg = ConversationChain(\n    llm=llm, verbose=True, prompt=prompt, memory=ConversationKGMemory(llm=llm)\n)\n\nconversation_with_kg.predict(input=\"Hi, what's up?\")\n\n    \n    \n    > Entering new ConversationChain chain...\n    Prompt after formatting:\n    The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. \n    If the AI does not know the answer to a question, it truthfully says it does not know. The AI ONLY uses information contained in the \"Relevant Information\" section and does not hallucinate.\n    \n    Relevant Information:\n    \n    \n    \n    Conversation:\n    Human: Hi, what's up?\n    AI:\n    \n    > Finished chain.\n\n\n\n\n\n    \" Hi there! I'm doing great. I'm currently in the process of learning about the world around me. I'm learning about different cultures, languages, and customs. It's really fascinating! How about you?\"\n\nconversation_with_kg.predict(\n    input=\"My name is James and I'm helping Will. He's an engineer.\"\n)\n\n    \n    \n    > Entering new ConversationChain chain...\n    Prompt after formatting:\n    The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. \n    If the AI does not know the answer to a question, it truthfully says it does not know. The AI ONLY uses information contained in the \"Relevant Information\" section and does not hallucinate.\n    \n    Relevant Information:\n    \n    \n    \n    Conversation:\n    Human: My name is James and I'm helping Will. He's an engineer.\n    AI:\n    \n    > Finished chain.\n\n\n\n\n\n    \" Hi James, it's nice to meet you. I'm an AI and I understand you're helping Will, the engineer. What kind of engineering does he do?\"\n\nconversation_with_kg.predict(input=\"What do you know about Will?\")\n\n    \n    \n    > Entering new ConversationChain chain...\n    Prompt after formatting:\n    The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. \n    If the AI does not know the answer to a question, it truthfully says it does not know. The AI ONLY uses information contained in the \"Relevant Information\" section and does not hallucinate.\n    \n    Relevant Information:\n    \n    On Will: Will is an engineer.\n    \n    Conversation:\n    Human: What do you know about Will?\n    AI:\n    \n    > Finished chain.\n\n\n\n\n\n    ' Will is an engineer.'\n\nPrevious\nEntity\nNext\nConversation Summary"
}