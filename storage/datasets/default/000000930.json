{
	"title": "Custom example selector | 🦜️🔗 Langchain",
	"url": "https://python.langchain.com/docs/modules/model_io/prompts/example_selectors/custom_example_selector",
	"html": "ModulesModel I/OPromptsExample selectorsCustom example selector\nCustom example selector\n\nIn this tutorial, we'll create a custom example selector that selects examples randomly from a given list of examples.\n\nAn ExampleSelector must implement two methods:\n\nAn add_example method which takes in an example and adds it into the ExampleSelector\nA select_examples method which takes in input variables (which are meant to be user input) and returns a list of examples to use in the few-shot prompt.\n\nLet's implement a custom ExampleSelector that just selects two examples at random.\n\nNote: Take a look at the current set of example selector implementations supported in LangChain here.\n\nImplement custom example selector​\nfrom langchain.prompts.example_selector.base import BaseExampleSelector\nfrom typing import Dict, List\nimport numpy as np\n\n\nclass CustomExampleSelector(BaseExampleSelector):\n    \n    def __init__(self, examples: List[Dict[str, str]]):\n        self.examples = examples\n    \n    def add_example(self, example: Dict[str, str]) -> None:\n        \"\"\"Add new example to store for a key.\"\"\"\n        self.examples.append(example)\n\n    def select_examples(self, input_variables: Dict[str, str]) -> List[dict]:\n        \"\"\"Select which examples to use based on the inputs.\"\"\"\n        return np.random.choice(self.examples, size=2, replace=False)\n\n\nUse custom example selector​\n\nexamples = [\n    {\"foo\": \"1\"},\n    {\"foo\": \"2\"},\n    {\"foo\": \"3\"}\n]\n\n# Initialize example selector.\nexample_selector = CustomExampleSelector(examples)\n\n# Select examples\nexample_selector.select_examples({\"foo\": \"foo\"})\n# -> array([{'foo': '2'}, {'foo': '3'}], dtype=object)\n\n# Add new example to the set of examples\nexample_selector.add_example({\"foo\": \"4\"})\nexample_selector.examples\n# -> [{'foo': '1'}, {'foo': '2'}, {'foo': '3'}, {'foo': '4'}]\n\n# Select examples\nexample_selector.select_examples({\"foo\": \"foo\"})\n# -> array([{'foo': '1'}, {'foo': '4'}], dtype=object)\n\nPrevious\nExample selectors\nNext\nSelect by length"
}