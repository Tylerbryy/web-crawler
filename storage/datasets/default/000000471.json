{
	"title": "Weaviate Hybrid Search | ü¶úÔ∏èüîó Langchain",
	"url": "https://python.langchain.com/docs/integrations/retrievers/weaviate-hybrid",
	"html": "ComponentsRetrieversWeaviate Hybrid Search\nWeaviate Hybrid Search\n\nWeaviate is an open-source vector database.\n\nHybrid search is a technique that combines multiple search algorithms to improve the accuracy and relevance of search results. It uses the best features of both keyword-based search algorithms with vector search techniques.\n\nThe Hybrid search in Weaviate uses sparse and dense vectors to represent the meaning and context of search queries and documents.\n\nThis notebook shows how to use Weaviate hybrid search as a LangChain retriever.\n\nSet up the retriever:\n\n#!pip install weaviate-client\n\nimport os\n\nimport weaviate\n\nWEAVIATE_URL = os.getenv(\"WEAVIATE_URL\")\nauth_client_secret = (weaviate.AuthApiKey(api_key=os.getenv(\"WEAVIATE_API_KEY\")),)\nclient = weaviate.Client(\n    url=WEAVIATE_URL,\n    additional_headers={\n        \"X-Openai-Api-Key\": os.getenv(\"OPENAI_API_KEY\"),\n    },\n)\n\n# client.schema.delete_all()\n\nfrom langchain.retrievers.weaviate_hybrid_search import WeaviateHybridSearchRetriever\nfrom langchain.schema import Document\n\n    \n\nretriever = WeaviateHybridSearchRetriever(\n    client=client,\n    index_name=\"LangChain\",\n    text_key=\"text\",\n    attributes=[],\n    create_schema_if_missing=True,\n)\n\n\nAdd some data:\n\ndocs = [\n    Document(\n        metadata={\n            \"title\": \"Embracing The Future: AI Unveiled\",\n            \"author\": \"Dr. Rebecca Simmons\",\n        },\n        page_content=\"A comprehensive analysis of the evolution of artificial intelligence, from its inception to its future prospects. Dr. Simmons covers ethical considerations, potentials, and threats posed by AI.\",\n    ),\n    Document(\n        metadata={\n            \"title\": \"Symbiosis: Harmonizing Humans and AI\",\n            \"author\": \"Prof. Jonathan K. Sterling\",\n        },\n        page_content=\"Prof. Sterling explores the potential for harmonious coexistence between humans and artificial intelligence. The book discusses how AI can be integrated into society in a beneficial and non-disruptive manner.\",\n    ),\n    Document(\n        metadata={\"title\": \"AI: The Ethical Quandary\", \"author\": \"Dr. Rebecca Simmons\"},\n        page_content=\"In her second book, Dr. Simmons delves deeper into the ethical considerations surrounding AI development and deployment. It is an eye-opening examination of the dilemmas faced by developers, policymakers, and society at large.\",\n    ),\n    Document(\n        metadata={\n            \"title\": \"Conscious Constructs: The Search for AI Sentience\",\n            \"author\": \"Dr. Samuel Cortez\",\n        },\n        page_content=\"Dr. Cortez takes readers on a journey exploring the controversial topic of AI consciousness. The book provides compelling arguments for and against the possibility of true AI sentience.\",\n    ),\n    Document(\n        metadata={\n            \"title\": \"Invisible Routines: Hidden AI in Everyday Life\",\n            \"author\": \"Prof. Jonathan K. Sterling\",\n        },\n        page_content=\"In his follow-up to 'Symbiosis', Prof. Sterling takes a look at the subtle, unnoticed presence and influence of AI in our everyday lives. It reveals how AI has become woven into our routines, often without our explicit realization.\",\n    ),\n]\n\nretriever.add_documents(docs)\n\n    ['3a27b0a5-8dbb-4fee-9eba-8b6bc2c252be',\n     'eeb9fd9b-a3ac-4d60-a55b-a63a25d3b907',\n     '7ebbdae7-1061-445f-a046-1989f2343d8f',\n     'c2ab315b-3cab-467f-b23a-b26ed186318d',\n     'b83765f2-e5d2-471f-8c02-c3350ade4c4f']\n\n\nDo a hybrid search:\n\nretriever.get_relevant_documents(\"the ethical implications of AI\")\n\n    [Document(page_content='In her second book, Dr. Simmons delves deeper into the ethical considerations surrounding AI development and deployment. It is an eye-opening examination of the dilemmas faced by developers, policymakers, and society at large.', metadata={}),\n     Document(page_content='A comprehensive analysis of the evolution of artificial intelligence, from its inception to its future prospects. Dr. Simmons covers ethical considerations, potentials, and threats posed by AI.', metadata={}),\n     Document(page_content=\"In his follow-up to 'Symbiosis', Prof. Sterling takes a look at the subtle, unnoticed presence and influence of AI in our everyday lives. It reveals how AI has become woven into our routines, often without our explicit realization.\", metadata={}),\n     Document(page_content='Prof. Sterling explores the potential for harmonious coexistence between humans and artificial intelligence. The book discusses how AI can be integrated into society in a beneficial and non-disruptive manner.', metadata={})]\n\n\nDo a hybrid search with where filter:\n\nretriever.get_relevant_documents(\n    \"AI integration in society\",\n    where_filter={\n        \"path\": [\"author\"],\n        \"operator\": \"Equal\",\n        \"valueString\": \"Prof. Jonathan K. Sterling\",\n    },\n)\n\n    [Document(page_content='Prof. Sterling explores the potential for harmonious coexistence between humans and artificial intelligence. The book discusses how AI can be integrated into society in a beneficial and non-disruptive manner.', metadata={}),\n     Document(page_content=\"In his follow-up to 'Symbiosis', Prof. Sterling takes a look at the subtle, unnoticed presence and influence of AI in our everyday lives. It reveals how AI has become woven into our routines, often without our explicit realization.\", metadata={})]\n\n\nDo a hybrid search with scores:\n\nretriever.get_relevant_documents(\n    \"AI integration in society\",\n    score=True,\n)\n\n    [Document(page_content='Prof. Sterling explores the potential for harmonious coexistence between humans and artificial intelligence. The book discusses how AI can be integrated into society in a beneficial and non-disruptive manner.', metadata={'_additional': {'explainScore': '(bm25)\\n(hybrid) Document eeb9fd9b-a3ac-4d60-a55b-a63a25d3b907 contributed 0.00819672131147541 to the score\\n(hybrid) Document eeb9fd9b-a3ac-4d60-a55b-a63a25d3b907 contributed 0.00819672131147541 to the score', 'score': '0.016393442'}}),\n     Document(page_content=\"In his follow-up to 'Symbiosis', Prof. Sterling takes a look at the subtle, unnoticed presence and influence of AI in our everyday lives. It reveals how AI has become woven into our routines, often without our explicit realization.\", metadata={'_additional': {'explainScore': '(bm25)\\n(hybrid) Document b83765f2-e5d2-471f-8c02-c3350ade4c4f contributed 0.0078125 to the score\\n(hybrid) Document b83765f2-e5d2-471f-8c02-c3350ade4c4f contributed 0.008064516129032258 to the score', 'score': '0.015877016'}}),\n     Document(page_content='In her second book, Dr. Simmons delves deeper into the ethical considerations surrounding AI development and deployment. It is an eye-opening examination of the dilemmas faced by developers, policymakers, and society at large.', metadata={'_additional': {'explainScore': '(bm25)\\n(hybrid) Document 7ebbdae7-1061-445f-a046-1989f2343d8f contributed 0.008064516129032258 to the score\\n(hybrid) Document 7ebbdae7-1061-445f-a046-1989f2343d8f contributed 0.0078125 to the score', 'score': '0.015877016'}}),\n     Document(page_content='A comprehensive analysis of the evolution of artificial intelligence, from its inception to its future prospects. Dr. Simmons covers ethical considerations, potentials, and threats posed by AI.', metadata={'_additional': {'explainScore': '(vector) [-0.0071824766 -0.0006682752 0.001723625 -0.01897258 -0.0045127636 0.0024410256 -0.020503938 0.013768672 0.009520169 -0.037972264]...  \\n(hybrid) Document 3a27b0a5-8dbb-4fee-9eba-8b6bc2c252be contributed 0.007936507936507936 to the score', 'score': '0.007936508'}})]\n\nPrevious\nVespa\nNext\nWikipedia"
}