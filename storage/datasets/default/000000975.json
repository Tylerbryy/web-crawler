{
	"title": "Elasticsearch | 🦜️🔗 Langchain",
	"url": "https://python.langchain.com/docs/integrations/memory/elasticsearch_chat_message_history",
	"html": "ComponentsMemoryElasticsearch\nElasticsearch\n\nElasticsearch is a distributed, RESTful search and analytics engine, capable of performing both vector and lexical search. It is built on top of the Apache Lucene library.\n\nThis notebook shows how to use chat message history functionality with Elasticsearch.\n\nSet up Elasticsearch​\n\nThere are two main ways to set up an Elasticsearch instance:\n\nElastic Cloud. Elastic Cloud is a managed Elasticsearch service. Sign up for a free trial.\n\nLocal Elasticsearch installation. Get started with Elasticsearch by running it locally. The easiest way is to use the official Elasticsearch Docker image. See the Elasticsearch Docker documentation for more information.\n\nInstall dependencies​\n%pip install elasticsearch langchain\n\nAuthentication​\nHow to obtain a password for the default \"elastic\" user​\n\nTo obtain your Elastic Cloud password for the default \"elastic\" user:\n\nLog in to the Elastic Cloud console\nGo to \"Security\" > \"Users\"\nLocate the \"elastic\" user and click \"Edit\"\nClick \"Reset password\"\nFollow the prompts to reset the password\nUse the Username/password​\nes_username = os.environ.get(\"ES_USERNAME\", \"elastic\")\nes_password = os.environ.get(\"ES_PASSWORD\", \"change me...\")\n\nhistory = ElasticsearchChatMessageHistory(\n    es_url=es_url,\n    es_user=es_username,\n    es_password=es_password,\n    index=\"test-history\",\n    session_id=\"test-session\"\n)\n\nHow to obtain an API key​\n\nTo obtain an API key:\n\nLog in to the Elastic Cloud console\nOpen Kibana and go to Stack Management > API Keys\nClick \"Create API key\"\nEnter a name for the API key and click \"Create\"\nUse the API key​\nes_api_key = os.environ.get(\"ES_API_KEY\")\n\nhistory = ElasticsearchChatMessageHistory(\n    es_api_key=es_api_key,\n    index=\"test-history\",\n    session_id=\"test-session\"\n)\n\nInitialize Elasticsearch client and chat message history​\nimport os\n\nfrom langchain.memory import ElasticsearchChatMessageHistory\n\nes_url = os.environ.get(\"ES_URL\", \"http://localhost:9200\")\n\n# If using Elastic Cloud:\n# es_cloud_id = os.environ.get(\"ES_CLOUD_ID\")\n\n# Note: see Authentication section for various authentication methods\n\nhistory = ElasticsearchChatMessageHistory(\n    es_url=es_url, index=\"test-history\", session_id=\"test-session\"\n)\n\nUse the chat message history​\nhistory.add_user_message(\"hi!\")\nhistory.add_ai_message(\"whats up?\")\n\n    indexing message content='hi!' additional_kwargs={} example=False\n    indexing message content='whats up?' additional_kwargs={} example=False\n\nPrevious\nCassandra\nNext\nMomento Cache"
}