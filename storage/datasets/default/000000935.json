{
	"title": "Select by n-gram overlap | ü¶úÔ∏èüîó Langchain",
	"url": "https://python.langchain.com/docs/modules/model_io/prompts/example_selectors/ngram_overlap",
	"html": "ModulesModel I/OPromptsExample selectorsSelect by n-gram overlap\nSelect by n-gram overlap\n\nThe NGramOverlapExampleSelector selects and orders examples based on which examples are most similar to the input, according to an ngram overlap score. The ngram overlap score is a float between 0.0 and 1.0, inclusive.\n\nThe selector allows for a threshold score to be set. Examples with an ngram overlap score less than or equal to the threshold are excluded. The threshold is set to -1.0, by default, so will not exclude any examples, only reorder them. Setting the threshold to 0.0 will exclude examples that have no ngram overlaps with the input.\n\nfrom langchain.prompts import FewShotPromptTemplate, PromptTemplate\nfrom langchain.prompts.example_selector.ngram_overlap import NGramOverlapExampleSelector\n\nexample_prompt = PromptTemplate(\n    input_variables=[\"input\", \"output\"],\n    template=\"Input: {input}\\nOutput: {output}\",\n)\n\n# Examples of a fictional translation task.\nexamples = [\n    {\"input\": \"See Spot run.\", \"output\": \"Ver correr a Spot.\"},\n    {\"input\": \"My dog barks.\", \"output\": \"Mi perro ladra.\"},\n    {\"input\": \"Spot can run.\", \"output\": \"Spot puede correr.\"},\n]\n\nexample_selector = NGramOverlapExampleSelector(\n    # The examples it has available to choose from.\n    examples=examples,\n    # The PromptTemplate being used to format the examples.\n    example_prompt=example_prompt,\n    # The threshold, at which selector stops.\n    # It is set to -1.0 by default.\n    threshold=-1.0,\n    # For negative threshold:\n    # Selector sorts examples by ngram overlap score, and excludes none.\n    # For threshold greater than 1.0:\n    # Selector excludes all examples, and returns an empty list.\n    # For threshold equal to 0.0:\n    # Selector sorts examples by ngram overlap score,\n    # and excludes those with no ngram overlap with input.\n)\ndynamic_prompt = FewShotPromptTemplate(\n    # We provide an ExampleSelector instead of examples.\n    example_selector=example_selector,\n    example_prompt=example_prompt,\n    prefix=\"Give the Spanish translation of every input\",\n    suffix=\"Input: {sentence}\\nOutput:\",\n    input_variables=[\"sentence\"],\n)\n\n# An example input with large ngram overlap with \"Spot can run.\"\n# and no overlap with \"My dog barks.\"\nprint(dynamic_prompt.format(sentence=\"Spot can run fast.\"))\n\n    Give the Spanish translation of every input\n    \n    Input: Spot can run.\n    Output: Spot puede correr.\n    \n    Input: See Spot run.\n    Output: Ver correr a Spot.\n    \n    Input: My dog barks.\n    Output: Mi perro ladra.\n    \n    Input: Spot can run fast.\n    Output:\n\n# You can add examples to NGramOverlapExampleSelector as well.\nnew_example = {\"input\": \"Spot plays fetch.\", \"output\": \"Spot juega a buscar.\"}\n\nexample_selector.add_example(new_example)\nprint(dynamic_prompt.format(sentence=\"Spot can run fast.\"))\n\n    Give the Spanish translation of every input\n    \n    Input: Spot can run.\n    Output: Spot puede correr.\n    \n    Input: See Spot run.\n    Output: Ver correr a Spot.\n    \n    Input: Spot plays fetch.\n    Output: Spot juega a buscar.\n    \n    Input: My dog barks.\n    Output: Mi perro ladra.\n    \n    Input: Spot can run fast.\n    Output:\n\n# You can set a threshold at which examples are excluded.\n# For example, setting threshold equal to 0.0\n# excludes examples with no ngram overlaps with input.\n# Since \"My dog barks.\" has no ngram overlaps with \"Spot can run fast.\"\n# it is excluded.\nexample_selector.threshold = 0.0\nprint(dynamic_prompt.format(sentence=\"Spot can run fast.\"))\n\n    Give the Spanish translation of every input\n    \n    Input: Spot can run.\n    Output: Spot puede correr.\n    \n    Input: See Spot run.\n    Output: Ver correr a Spot.\n    \n    Input: Spot plays fetch.\n    Output: Spot juega a buscar.\n    \n    Input: Spot can run fast.\n    Output:\n\n# Setting small nonzero threshold\nexample_selector.threshold = 0.09\nprint(dynamic_prompt.format(sentence=\"Spot can play fetch.\"))\n\n    Give the Spanish translation of every input\n    \n    Input: Spot can run.\n    Output: Spot puede correr.\n    \n    Input: Spot plays fetch.\n    Output: Spot juega a buscar.\n    \n    Input: Spot can play fetch.\n    Output:\n\n# Setting threshold greater than 1.0\nexample_selector.threshold = 1.0 + 1e-9\nprint(dynamic_prompt.format(sentence=\"Spot can play fetch.\"))\n\n    Give the Spanish translation of every input\n    \n    Input: Spot can play fetch.\n    Output:\n\nPrevious\nSelect by maximal marginal relevance (MMR)\nNext\nSelect by similarity"
}